

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Re-estimation of best models &mdash; Biogeme 3.2.14 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=0b773b56"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Example of a catalog" href="plot_simple_example.html" />
    <link rel="prev" title="One model among many" href="plot_b08selected_specification.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Biogeme
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#calculating-indicators">Calculating indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#timing-function-evaluation">Timing function evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#monte-carlo-integration">Monte-Carlo integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#choice-models-with-latent-variables">Choice models with latent variables</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../examples.html#assisted-specification-algorithm">Assisted specification algorithm</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Assisted specification with Biogeme</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="everything_spec.html">Combination of many specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b00logit.html">Base model</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b01model.html">Investigation of several choice models</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b02nonlinear.html">Catalog of nonlinear specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b03alt_spec.html">Catalog for alternative specific coefficients</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b04segmentation.html">Catalog for segmented parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b05alt_spec_segmentation.html">Segmentations and alternative specific specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b06everything.html">Combine many specifications: exception is raised</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b07everything_assisted.html">Combine many specifications: assisted specification algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b08selected_specification.html">One model among many</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Re-estimation of best models</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_simple_example.html">Example of a catalog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#estimation-with-samples-of-alternatives">Estimation with samples of alternatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#multiple-discrete-continuous-extreme-value-models">Multiple Discrete Continuous Extreme Value models</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/toml.html">Configuration parameters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/native_draws.html">Native draws</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/biogeme.html">.biogeme module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Biogeme</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../examples.html">Examples</a></li>
          <li class="breadcrumb-item"><a href="index.html">Assisted specification with Biogeme</a></li>
      <li class="breadcrumb-item active">Re-estimation of best models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/auto_examples/assisted/plot_b09post_processing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-assisted-plot-b09post-processing-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="re-estimation-of-best-models">
<span id="sphx-glr-auto-examples-assisted-plot-b09post-processing-py"></span><h1>Re-estimation of best models<a class="headerlink" href="#re-estimation-of-best-models" title="Link to this heading">ÔÉÅ</a></h1>
<p>After running the assisted specification algorithm for the 432
specifications in <a class="reference internal" href="everything_spec.html#everything-spec-section"><span class="std std-ref">Combination of many specifications</span></a>, we use post processing to
re-estimate all Pareto optimal models, and display some information
about the algorithm.
See <a class="reference external" href="https://transp-or.epfl.ch/documents/technicalReports/BierOrte23.pdf">Bierlaire and Ortelli (2023)</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Michel Bierlaire, EPFL</p>
</dd>
<dt class="field-even">date<span class="colon">:</span></dt>
<dd class="field-even"><p>Thu Jul 20 17:15:37 2023</p>
</dd>
</dl>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

    <span class="n">can_plot</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
    <span class="n">can_plot</span> <span class="o">=</span> <span class="kc">False</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">biogeme.biogeme_logging</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">blog</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">biogeme.biogeme</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">biogeme.assisted</span><span class="w"> </span><span class="kn">import</span> <span class="n">ParetoPostProcessing</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">everything_spec</span><span class="w"> </span><span class="kn">import</span> <span class="n">model_catalog</span><span class="p">,</span> <span class="n">database</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">blog</span><span class="o">.</span><span class="n">get_screen_logger</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">blog</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Example b08selected_specification&#39;</span><span class="p">)</span>

<span class="n">PARETO_FILE_NAME</span> <span class="o">=</span> <span class="s1">&#39;saved_results/b07everything_assisted.pareto&#39;</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Example b08selected_specification
</pre></div>
</div>
<p>Create the biogeme object from the catalog.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">the_biogeme</span> <span class="o">=</span> <span class="n">bio</span><span class="o">.</span><span class="n">BIOGEME</span><span class="p">(</span><span class="n">database</span><span class="p">,</span> <span class="n">model_catalog</span><span class="p">)</span>
<span class="n">the_biogeme</span><span class="o">.</span><span class="n">modelName</span> <span class="o">=</span> <span class="s1">&#39;b09post_processing&#39;</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Biogeme parameters read from biogeme.toml.
</pre></div>
</div>
<p>Create the post processing object.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">post_processing</span> <span class="o">=</span> <span class="n">ParetoPostProcessing</span><span class="p">(</span>
    <span class="n">biogeme_object</span><span class="o">=</span><span class="n">the_biogeme</span><span class="p">,</span> <span class="n">pareto_file_name</span><span class="o">=</span><span class="n">PARETO_FILE_NAME</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Pareto set initialized from file with 192 elements [11 Pareto] and 29 invalid elements.
</pre></div>
</div>
<p>Re-estimate the models.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">all_results</span> <span class="o">=</span> <span class="n">post_processing</span><span class="o">.</span><span class="n">reestimate</span><span class="p">(</span><span class="n">recycle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000000.iter
Cannot read file __b09post_processing_000000.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA          B_COST          B_TIME    cube_tt_coef  square_tt_coef     Function    Relgrad   Radius      Rho
    0             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10        1      0.6    +
    1             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10      0.5     -3.7    -
    2             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10     0.25     -3.5    -
    3             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10     0.12     -3.5    -
    4             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10    0.062     -3.5    -
    5             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10    0.031     -4.2    -
    6             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10    0.016       -5    -
    7             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10   0.0078     -5.6    -
    8             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10   0.0039     -4.1    -
    9             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10    0.002     -3.4    -
   10             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10  0.00098       -3    -
   11             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10  0.00049     -2.8    -
   12             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10  0.00024     -2.4    -
   13             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10  0.00012     -1.7    -
   14             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0003         -0.0055      8.5e+03         10  6.1e-05    -0.36    -
   15             0.2           -0.62            -0.4             1.3           -0.89            -2.2        -0.00024         -0.0056      8.5e+03        7.1  0.00061     0.96   ++
   16             0.2           -0.62            -0.4             1.3           -0.89            -2.2        -0.00022         -0.0062      8.5e+03        9.8  0.00061     0.83    +
   17             0.2           -0.62            -0.4             1.3           -0.89            -2.2        -0.00022         -0.0068      8.5e+03       0.87   0.0061        1   ++
   18             0.2           -0.62            -0.4             1.3           -0.89            -2.2         -0.0002          -0.013      8.5e+03       0.42    0.061        1   ++
   19             0.2           -0.62            -0.4             1.3           -0.89            -2.2         5.3e-05          -0.074      8.3e+03        2.1     0.61     0.94   ++
   20             0.2           -0.62            -0.4             1.3           -0.89            -2.2         5.3e-05          -0.074      8.3e+03        2.1     0.25    -0.26    -
   21            0.24           -0.64           -0.65             1.3           -0.81            -2.3         0.00023           -0.12      8.3e+03         24     0.25     0.79    +
   22             0.2           -0.82           -0.88             1.5           -0.71            -2.2         0.00022           -0.11      8.2e+03        2.8      2.5        1   ++
   23            0.14            -1.1           -0.95             1.6           -0.72              -2         0.00019            -0.1      8.2e+03        1.2       25        1   ++
   24            0.16            -1.2           -0.91             1.6           -0.72            -2.1          0.0002            -0.1      8.2e+03      0.015  2.5e+02        1   ++
   25            0.16            -1.3           -0.92             1.6           -0.72            -2.1          0.0002            -0.1      8.2e+03    0.00013  2.5e+03        1   ++
   26            0.16            -1.3           -0.92             1.6           -0.72            -2.1          0.0002            -0.1      8.2e+03    8.9e-05  2.5e+03        1   ++
Results saved in file b09post_processing_000000.html
Results saved in file b09post_processing_000000.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000001.iter
Cannot read file __b09post_processing_000001.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA          B_COST          B_TIME B_TIME_1st_clas     Function    Relgrad   Radius      Rho
    0          -0.032            -1.3            -1.2             1.4           -0.74           -0.69           -0.44      8.3e+03      0.031        1     0.72    +
    1         0.00031            -1.2            -1.2             1.5           -0.78           -0.86           -0.59      8.3e+03     0.0024       10      1.1   ++
    2         0.00031            -1.2            -1.2             1.5           -0.78           -0.86           -0.59      8.3e+03    2.3e-05       10        1   ++
Results saved in file b09post_processing_000001.html
Results saved in file b09post_processing_000001.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000002.iter
Cannot read file __b09post_processing_000002.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.     Function    Relgrad   Radius      Rho
    0      8.6e+03         15        1     0.25    +
    1      8.6e+03         15      0.5       -6    -
    2      8.6e+03         15     0.25       -2    -
    3      8.5e+03    1.1e+02     0.25     0.12    +
    4      8.2e+03         45      2.5        1   ++
    5      8.1e+03         12       25        1   ++
    6      8.1e+03       0.84  2.5e+02        1   ++
    7      8.1e+03      0.027  2.5e+03        1   ++
    8      8.1e+03    8.6e-06  2.5e+03        1   ++
Results saved in file b09post_processing_000002.html
Results saved in file b09post_processing_000002.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000003.iter
Cannot read file __b09post_processing_000003.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA ASC_CAR_one_lug ASC_CAR_several       ASC_TRAIN    ASC_TRAIN_GA ASC_TRAIN_one_l ASC_TRAIN_sever      B_COST_CAR       B_COST_SM    B_COST_TRAIN          B_TIME B_TIME_commuter    cube_tt_coef  square_tt_coef     Function    Relgrad   Radius      Rho
    0           -0.14           -0.92           -0.08            -0.5           -0.88             1.2            0.48            0.43           -0.35           -0.75              -1            -2.1            -1.1          0.0002           -0.11      8.1e+03       0.57       10      1.1   ++
    1           -0.13              -1          -0.083           -0.51           -0.92             1.2            0.54            0.51           -0.36           -0.76            -1.1            -2.1            -1.2         0.00021           -0.11      8.1e+03       0.14    1e+02        1   ++
    2           -0.13              -1          -0.084           -0.51           -0.93             1.2            0.55            0.52           -0.36           -0.76            -1.1            -2.1            -1.2         0.00021           -0.11      8.1e+03      0.005    1e+03        1   ++
    3           -0.13              -1          -0.084           -0.51           -0.93             1.2            0.55            0.52           -0.36           -0.76            -1.1            -2.1            -1.2         0.00021           -0.11      8.1e+03      3e-06    1e+03        1   ++
Results saved in file b09post_processing_000003.html
Results saved in file b09post_processing_000003.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000004.iter
Cannot read file __b09post_processing_000004.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR       ASC_TRAIN          B_COST          B_TIME B_TIME_1st_clas     Function    Relgrad   Radius      Rho
    0           0.003           -0.67           -0.86           -0.91           -0.67      8.6e+03     0.0057       10      1.1   ++
    1           0.003           -0.67           -0.86           -0.91           -0.67      8.6e+03    8.3e-05       10        1   ++
Results saved in file b09post_processing_000004.html
Results saved in file b09post_processing_000004.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000005.iter
Cannot read file __b09post_processing_000005.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA          B_COST          B_TIME B_TIME_commuter    cube_tt_coef       mu_public  square_tt_coef     Function    Relgrad   Radius      Rho
    0            0.16            -1.2           -0.89             1.6            -0.7            -1.9            -1.1         0.00019               1            -0.1      8.2e+03       0.66       10     0.94   ++
    1            0.16            -1.2            -0.9             1.6           -0.71              -2            -1.1          0.0002               1           -0.11      8.2e+03        0.2    1e+02        1   ++
    2            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.1          0.0002               1           -0.11      8.2e+03       0.15    1e+03        1   ++
    3            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.2          0.0002               1           -0.11      8.2e+03       0.23    1e+04        1   ++
    4            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.2          0.0002               1           -0.11      8.2e+03      0.002    1e+05        1   ++
    5            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.2          0.0002               1           -0.11      8.2e+03     0.0049    1e+06        1   ++
    6            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.2          0.0002               1           -0.11      8.2e+03     0.0029    1e+07        1   ++
    7            0.17            -1.3            -0.9             1.6           -0.71              -2            -1.2          0.0002               1           -0.11      8.2e+03    1.8e-05    1e+07        1   ++
Results saved in file b09post_processing_000005.html
Results saved in file b09post_processing_000005.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000006.iter
Cannot read file __b09post_processing_000006.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR       ASC_TRAIN          B_COST          B_TIME     Function    Relgrad   Radius      Rho
    0           0.021           -0.56           -0.73            -1.1      8.7e+03      0.039        1     0.74    +
    1            0.01           -0.65           -0.78            -1.3      8.7e+03     0.0029       10        1   ++
    2            0.01           -0.65           -0.78            -1.3      8.7e+03    1.9e-05       10        1   ++
Results saved in file b09post_processing_000006.html
Results saved in file b09post_processing_000006.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000007.iter
Cannot read file __b09post_processing_000007.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA      B_COST_CAR       B_COST_SM    B_COST_TRAIN          B_TIME B_TIME_commuter    cube_tt_coef     mu_existing  square_tt_coef     Function    Relgrad   Radius      Rho
    0           -0.18           -0.95           -0.58            0.74           -0.37           -0.71           -0.11            -1.9            -1.2         0.00025             1.5           -0.12      8.5e+03         26        1     0.14    +
    1           -0.25           -0.35           -0.36            0.83           -0.02           -0.55           -0.55            -1.5           -0.81         0.00021             2.3           -0.11      8.2e+03         14        1     0.73    +
    2          -0.099           -0.26           -0.25               1           -0.23           -0.62           -0.87              -2           -0.72         0.00019             1.3            -0.1      8.1e+03        2.2        1     0.61    +
    3           -0.16           -0.57           -0.39             1.1           -0.28           -0.67           -0.83            -1.9            -0.9          0.0002             1.5           -0.11      8.1e+03       0.53       10      1.1   ++
    4           -0.17           -0.56           -0.35               1           -0.27           -0.66           -0.82            -1.9           -0.93          0.0002             1.6           -0.11      8.1e+03       0.12    1e+02        1   ++
    5           -0.17           -0.56           -0.35               1           -0.27           -0.66           -0.82            -1.9           -0.93          0.0002             1.6           -0.11      8.1e+03    0.00054    1e+03        1   ++
    6           -0.17           -0.56           -0.35               1           -0.27           -0.66           -0.82            -1.9           -0.93          0.0002             1.6           -0.11      8.1e+03    1.1e-06    1e+03        1   ++
Results saved in file b09post_processing_000007.html
Results saved in file b09post_processing_000007.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000008.iter
Cannot read file __b09post_processing_000008.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA      B_COST_CAR       B_COST_SM    B_COST_TRAIN          B_TIME B_TIME_commuter    cube_tt_coef  square_tt_coef     Function    Relgrad   Radius      Rho
    0           -0.19           -0.96           -0.58             1.3           -0.35           -0.75              -1            -2.1            -1.1         0.00019           -0.11      8.1e+03        2.9       10      1.1   ++
    1           -0.18            -1.1           -0.56             1.3           -0.36           -0.76            -1.1            -2.1            -1.1          0.0002           -0.11      8.1e+03       0.54    1e+02        1   ++
    2           -0.18            -1.1           -0.56             1.3           -0.36           -0.76            -1.1            -2.1            -1.1          0.0002           -0.11      8.1e+03     0.0035    1e+03        1   ++
    3           -0.18            -1.1           -0.56             1.3           -0.36           -0.76            -1.1            -2.1            -1.1          0.0002           -0.11      8.1e+03    1.6e-05    1e+03        1   ++
Results saved in file b09post_processing_000008.html
Results saved in file b09post_processing_000008.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000009.iter
Cannot read file __b09post_processing_000009.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA       ASC_TRAIN    ASC_TRAIN_GA          B_COST          B_TIME    cube_tt_coef     mu_existing  square_tt_coef     Function    Relgrad   Radius      Rho
    0            0.39            -0.1           -0.12            0.45           -0.36            -1.8         0.00011             2.2          -0.082      8.4e+03         37        1     0.15    +
    1            0.39            -0.1           -0.12            0.45           -0.36            -1.8         0.00011             2.2          -0.082      8.4e+03         37     0.38     -3.5    -
    2            0.39            -0.1           -0.12            0.45           -0.36            -1.8         0.00011             2.2          -0.082      8.4e+03         37     0.19    -0.25    -
    3             0.2           -0.22            -0.1            0.57           -0.46            -1.8         0.00028             2.3           -0.13      8.3e+03         63     0.19     0.57    +
    4            0.21           -0.36           -0.19            0.76           -0.57            -1.8         0.00016             2.2          -0.093      8.2e+03         29     0.19     0.83    +
    5            0.13           -0.49           -0.37            0.91           -0.53            -1.7          0.0002               2            -0.1      8.2e+03        1.3      1.9        1   ++
    6            0.15           -0.66           -0.54             1.1           -0.62            -1.8         0.00019             1.4            -0.1      8.2e+03        1.5      1.9     0.42    +
    7            0.16            -0.7           -0.53             1.1           -0.61            -1.9         0.00019             1.6            -0.1      8.2e+03       0.12       19      1.1   ++
    8            0.16           -0.69           -0.51             1.1           -0.61            -1.8         0.00019             1.6            -0.1      8.2e+03       0.02  1.9e+02        1   ++
    9            0.16           -0.68           -0.51             1.1           -0.61            -1.8         0.00019             1.6            -0.1      8.2e+03    0.00023  1.9e+03        1   ++
   10            0.16           -0.68           -0.51             1.1           -0.61            -1.8         0.00019             1.6            -0.1      8.2e+03     0.0004  1.9e+04        1   ++
   11            0.16           -0.68           -0.51             1.1           -0.61            -1.8         0.00019             1.6            -0.1      8.2e+03    0.00072  1.9e+05        1   ++
   12            0.16           -0.68           -0.51             1.1           -0.61            -1.8         0.00019             1.6            -0.1      8.2e+03     0.0003  1.9e+05        1   ++
Results saved in file b09post_processing_000009.html
Results saved in file b09post_processing_000009.pickle
Biogeme parameters provided by the user.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Recycling was requested, but no pickle file was found
*** Initial values of the parameters are obtained from the file __b09post_processing_000010.iter
Cannot read file __b09post_processing_000010.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR       ASC_TRAIN      B_COST_CAR       B_COST_SM    B_COST_TRAIN          B_TIME     Function    Relgrad   Radius      Rho
    0           -0.41            0.17            -0.4            -0.8              -2            -1.2      8.5e+03       0.03        1     0.77    +
    1           -0.42          -0.036           -0.39           -0.82            -1.9            -1.3      8.4e+03     0.0017       10        1   ++
    2           -0.42          -0.036           -0.39           -0.82            -1.9            -1.3      8.4e+03    7.5e-06       10        1   ++
Results saved in file b09post_processing_000010.html
Results saved in file b09post_processing_000010.pickle
</pre></div>
</div>
<p>We retrieve the first estimation results for illustration.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span><span class="p">,</span> <span class="n">results</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">all_results</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</pre></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>ASC:GA;B_COST_gen_altspec:generic;B_TIME:no_seg;B_TIME_gen_altspec:generic;model_catalog:logit;train_tt_catalog:power
</pre></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">short_summary</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Results for model b09post_processing_000000
Nbr of parameters:              8
Sample size:                    10719
Excluded data:                  9
Final log likelihood:           -8212.024
Akaike Information Criterion:   16440.05
Bayesian Information Criterion: 16498.29
</pre></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">.</span><span class="n">get_estimated_parameters</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Value</th>
      <th>Rob. Std err</th>
      <th>Rob. t-test</th>
      <th>Rob. p-value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.158162</td>
      <td>0.034404</td>
      <td>4.597214</td>
      <td>4.281787e-06</td>
    </tr>
    <tr>
      <th>ASC_CAR_GA</th>
      <td>-1.263619</td>
      <td>0.155359</td>
      <td>-8.133522</td>
      <td>4.440892e-16</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>-0.919012</td>
      <td>0.052751</td>
      <td>-17.421825</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>ASC_TRAIN_GA</th>
      <td>1.559523</td>
      <td>0.069053</td>
      <td>22.584380</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>-0.717004</td>
      <td>0.053519</td>
      <td>-13.397058</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-2.070821</td>
      <td>0.078653</td>
      <td>-26.328496</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>cube_tt_coef</th>
      <td>0.000196</td>
      <td>0.000028</td>
      <td>7.061491</td>
      <td>1.647349e-12</td>
    </tr>
    <tr>
      <th>square_tt_coef</th>
      <td>-0.104698</td>
      <td>0.004742</td>
      <td>-22.078432</td>
      <td>0.000000e+00</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p>The following plot illustrates all models that have been
estimated.  Each dot corresponds to a model. The x-coordinate
corresponds to the Akaike Information Criterion (AIC). The
y-coordinate corresponds to the Bayesian Information Criterion
(BIC). Note that there is a third objective that does not appear on
this picture: the number of parameters. If the shape of the dot is a
circle, it means that it corresponds to a Pareto optimal model. If
the shape is a cross, it means that the model has been Pareto
optimal at some point during the algorithm and later removed as a
new model dominating it has been found. If the shape is a start, it
means that the model has been deemed invalid.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">can_plot</span><span class="p">:</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">post_processing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">label_x</span><span class="o">=</span><span class="s1">&#39;Nbr of parameters&#39;</span><span class="p">,</span>
        <span class="n">label_y</span><span class="o">=</span><span class="s1">&#39;Negative log likelihood&#39;</span><span class="p">,</span>
        <span class="n">objective_x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">objective_y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 12.911 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-assisted-plot-b09post-processing-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/291546633dca743755a478b417f9620f/plot_b09post_processing.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_b09post_processing.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/6d50e790db0ccbb4dd9992377ddb8740/plot_b09post_processing.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_b09post_processing.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/5d5a84f8fd2f424b9ae2e0a658ba1be4/plot_b09post_processing.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">plot_b09post_processing.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plot_b08selected_specification.html" class="btn btn-neutral float-left" title="One model among many" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plot_simple_example.html" class="btn btn-neutral float-right" title="Example of a catalog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Michel Bierlaire.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>