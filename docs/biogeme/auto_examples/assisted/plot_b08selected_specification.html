

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>One model among many &mdash; Biogeme 3.2.14 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=0b773b56"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Re-estimation of best models" href="plot_b09post_processing.html" />
    <link rel="prev" title="Combine many specifications: assisted specification algorithm" href="plot_b07everything_assisted.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Biogeme
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#calculating-indicators">Calculating indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#timing-function-evaluation">Timing function evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#monte-carlo-integration">Monte-Carlo integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#choice-models-with-latent-variables">Choice models with latent variables</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../examples.html#assisted-specification-algorithm">Assisted specification algorithm</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Assisted specification with Biogeme</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="everything_spec.html">Combination of many specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b00logit.html">Base model</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b01model.html">Investigation of several choice models</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b02nonlinear.html">Catalog of nonlinear specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b03alt_spec.html">Catalog for alternative specific coefficients</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b04segmentation.html">Catalog for segmented parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b05alt_spec_segmentation.html">Segmentations and alternative specific specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b06everything.html">Combine many specifications: exception is raised</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b07everything_assisted.html">Combine many specifications: assisted specification algorithm</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">One model among many</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_b09post_processing.html">Re-estimation of best models</a></li>
<li class="toctree-l4"><a class="reference internal" href="plot_simple_example.html">Example of a catalog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#estimation-with-samples-of-alternatives">Estimation with samples of alternatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples.html#multiple-discrete-continuous-extreme-value-models">Multiple Discrete Continuous Extreme Value models</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/toml.html">Configuration parameters</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/native_draws.html">Native draws</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code/biogeme.html">.biogeme module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Biogeme</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../examples.html">Examples</a></li>
          <li class="breadcrumb-item"><a href="index.html">Assisted specification with Biogeme</a></li>
      <li class="breadcrumb-item active">One model among many</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/auto_examples/assisted/plot_b08selected_specification.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-assisted-plot-b08selected-specification-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="one-model-among-many">
<span id="sphx-glr-auto-examples-assisted-plot-b08selected-specification-py"></span><h1>One model among many<a class="headerlink" href="#one-model-among-many" title="Link to this heading">ÔÉÅ</a></h1>
<p>We consider the model with 432 specifications defined in
<a class="reference internal" href="everything_spec.html#everything-spec-section"><span class="std std-ref">Combination of many specifications</span></a>. We select one specification and estimate it.
See <a class="reference external" href="https://transp-or.epfl.ch/documents/technicalReports/BierOrte23.pdf">Bierlaire and Ortelli (2023)</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Michel Bierlaire, EPFL</p>
</dd>
<dt class="field-even">date<span class="colon">:</span></dt>
<dd class="field-even"><p>Sat Jul 15 15:46:56 2023</p>
</dd>
</dl>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">biogeme.biogeme_logging</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">blog</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">biogeme.biogeme</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">everything_spec</span><span class="w"> </span><span class="kn">import</span> <span class="n">model_catalog</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">av</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">blog</span><span class="o">.</span><span class="n">get_screen_logger</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">blog</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</pre></div>
</div>
<p>The code characterizing the specification should be copied from the
.pareto file generated by the algorithm, or from one of the
glossaries illustrated in earlier examples.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">SPEC_ID</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;ASC:GA-LUGGAGE;&#39;</span>
    <span class="s1">&#39;B_COST_gen_altspec:generic;&#39;</span>
    <span class="s1">&#39;B_TIME:FIRST;&#39;</span>
    <span class="s1">&#39;B_TIME_gen_altspec:generic;&#39;</span>
    <span class="s1">&#39;model_catalog:logit;&#39;</span>
    <span class="s1">&#39;train_tt_catalog:power&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>the spec_id, and used as usual.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">the_biogeme</span> <span class="o">=</span> <span class="n">bio</span><span class="o">.</span><span class="n">BIOGEME</span><span class="o">.</span><span class="n">from_configuration</span><span class="p">(</span>
    <span class="n">config_id</span><span class="o">=</span><span class="n">SPEC_ID</span><span class="p">,</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">model_catalog</span><span class="p">,</span>
    <span class="n">database</span><span class="o">=</span><span class="n">database</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">the_biogeme</span><span class="o">.</span><span class="n">modelName</span> <span class="o">=</span> <span class="s1">&#39;my_favorite_model&#39;</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Biogeme parameters read from biogeme.toml.
</pre></div>
</div>
<p>Calculate of the null log-likelihood for reporting.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">the_biogeme</span><span class="o">.</span><span class="n">calculate_null_loglikelihood</span><span class="p">(</span><span class="n">av</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>np.float64(-11093.62734528626)
</pre></div>
</div>
<p>Estimate the parameters.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">the_biogeme</span><span class="o">.</span><span class="n">estimate</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
*** Initial values of the parameters are obtained from the file __my_favorite_model.iter
Cannot read file __my_favorite_model.iter. Statement is ignored.
As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from &quot;automatic&quot; to &quot;simple_bounds&quot;
Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds]
** Optimization: Newton with trust region for simple bounds
Iter.         ASC_CAR      ASC_CAR_GA ASC_CAR_one_lug ASC_CAR_several       ASC_TRAIN    ASC_TRAIN_GA ASC_TRAIN_one_l ASC_TRAIN_sever          B_COST          B_TIME B_TIME_1st_clas    cube_tt_coef  square_tt_coef     Function    Relgrad   Radius      Rho
    0            0.25            -1.2          -0.059           -0.49            -1.1             1.2            0.48            0.45           -0.71            -1.7           -0.55         0.00014          -0.093      8.2e+03        3.2       10     0.99   ++
    1            0.19            -1.2          -0.083           -0.53            -1.3             1.4            0.51            0.52           -0.77            -1.7           -0.66         0.00019            -0.1      8.1e+03        1.9    1e+02        1   ++
    2            0.19            -1.2          -0.083           -0.55            -1.3             1.4            0.51            0.54           -0.77            -1.7           -0.67         0.00019            -0.1      8.1e+03      0.032    1e+03        1   ++
    3            0.19            -1.2          -0.083           -0.55            -1.3             1.4            0.51            0.54           -0.77            -1.7           -0.67         0.00019            -0.1      8.1e+03    7.1e-05    1e+03        1   ++
Results saved in file my_favorite_model.html
Results saved in file my_favorite_model.pickle
</pre></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">short_summary</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Results for model my_favorite_model
Nbr of parameters:              13
Sample size:                    10719
Excluded data:                  9
Null log likelihood:            -11093.63
Final log likelihood:           -8148.851
Likelihood ratio test (null):           5889.553
Rho square (null):                      0.265
Rho bar square (null):                  0.264
Akaike Information Criterion:   16323.7
Bayesian Information Criterion: 16418.34
</pre></div>
</div>
<p>Get the results in a pandas table</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pandas_results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_estimated_parameters</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pandas_results</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Value</th>
      <th>Rob. Std err</th>
      <th>Rob. t-test</th>
      <th>Rob. p-value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ASC_CAR</th>
      <td>0.193057</td>
      <td>0.044191</td>
      <td>4.368671</td>
      <td>1.250047e-05</td>
    </tr>
    <tr>
      <th>ASC_CAR_GA</th>
      <td>-1.194747</td>
      <td>0.157769</td>
      <td>-7.572762</td>
      <td>3.663736e-14</td>
    </tr>
    <tr>
      <th>ASC_CAR_one_lugg</th>
      <td>-0.083521</td>
      <td>0.051120</td>
      <td>-1.633822</td>
      <td>1.022963e-01</td>
    </tr>
    <tr>
      <th>ASC_CAR_several_lugg</th>
      <td>-0.555340</td>
      <td>0.217753</td>
      <td>-2.550316</td>
      <td>1.076254e-02</td>
    </tr>
    <tr>
      <th>ASC_TRAIN</th>
      <td>-1.305491</td>
      <td>0.077253</td>
      <td>-16.898907</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>ASC_TRAIN_GA</th>
      <td>1.389739</td>
      <td>0.071917</td>
      <td>19.324254</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>ASC_TRAIN_one_lugg</th>
      <td>0.516221</td>
      <td>0.080211</td>
      <td>6.435814</td>
      <td>1.228138e-10</td>
    </tr>
    <tr>
      <th>ASC_TRAIN_several_lugg</th>
      <td>0.538939</td>
      <td>0.170964</td>
      <td>3.152351</td>
      <td>1.619613e-03</td>
    </tr>
    <tr>
      <th>B_COST</th>
      <td>-0.773722</td>
      <td>0.057310</td>
      <td>-13.500542</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>B_TIME</th>
      <td>-1.693541</td>
      <td>0.090445</td>
      <td>-18.724456</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>B_TIME_1st_class</th>
      <td>-0.666017</td>
      <td>0.087841</td>
      <td>-7.582061</td>
      <td>3.397282e-14</td>
    </tr>
    <tr>
      <th>cube_tt_coef</th>
      <td>0.000193</td>
      <td>0.000031</td>
      <td>6.269556</td>
      <td>3.620786e-10</td>
    </tr>
    <tr>
      <th>square_tt_coef</th>
      <td>-0.103586</td>
      <td>0.005047</td>
      <td>-20.524186</td>
      <td>0.000000e+00</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 0.632 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-assisted-plot-b08selected-specification-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/18d5999dc61f578f73581f02bed3ad6a/plot_b08selected_specification.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_b08selected_specification.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/e5f9c3ec438ef2ed1c6fc51e2e5d12de/plot_b08selected_specification.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_b08selected_specification.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/ba8c7d632bbd57540307499952a16a45/plot_b08selected_specification.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">plot_b08selected_specification.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plot_b07everything_assisted.html" class="btn btn-neutral float-left" title="Combine many specifications: assisted specification algorithm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plot_b09post_processing.html" class="btn btn-neutral float-right" title="Re-estimation of best models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Michel Bierlaire.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>