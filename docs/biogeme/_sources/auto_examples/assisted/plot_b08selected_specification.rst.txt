
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/assisted/plot_b08selected_specification.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_assisted_plot_b08selected_specification.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_assisted_plot_b08selected_specification.py:


One model among many
====================

We consider the model with 432 specifications defined in
:ref:`everything_spec_section`. We select one specification and estimate it.
See `Bierlaire and Ortelli (2023)
<https://transp-or.epfl.ch/documents/technicalReports/BierOrte23.pdf>`_.

:author: Michel Bierlaire, EPFL
:date: Sat Jul 15 15:46:56 2023

.. GENERATED FROM PYTHON SOURCE LINES 15-22

.. code-block:: Python


    import biogeme.biogeme_logging as blog
    import biogeme.biogeme as bio
    from everything_spec import model_catalog, database, av

    logger = blog.get_screen_logger(level=blog.INFO)








.. GENERATED FROM PYTHON SOURCE LINES 23-26

The code characterizing the specification should be copied from the
.pareto file generated by the algorithm, or from one of the
glossaries illustrated in earlier examples.

.. GENERATED FROM PYTHON SOURCE LINES 26-35

.. code-block:: Python

    SPEC_ID = (
        'ASC:GA-LUGGAGE;'
        'B_COST_gen_altspec:generic;'
        'B_TIME:FIRST;'
        'B_TIME_gen_altspec:generic;'
        'model_catalog:logit;'
        'train_tt_catalog:power'
    )








.. GENERATED FROM PYTHON SOURCE LINES 36-37

the spec_id, and used as usual.

.. GENERATED FROM PYTHON SOURCE LINES 37-44

.. code-block:: Python

    the_biogeme = bio.BIOGEME.from_configuration(
        config_id=SPEC_ID,
        expression=model_catalog,
        database=database,
    )
    the_biogeme.modelName = 'my_favorite_model'





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Biogeme parameters read from biogeme.toml. 




.. GENERATED FROM PYTHON SOURCE LINES 45-46

Calculate of the null log-likelihood for reporting.

.. GENERATED FROM PYTHON SOURCE LINES 46-48

.. code-block:: Python

    the_biogeme.calculate_null_loglikelihood(av)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    np.float64(-11093.62734528626)



.. GENERATED FROM PYTHON SOURCE LINES 49-50

Estimate the parameters.

.. GENERATED FROM PYTHON SOURCE LINES 50-52

.. code-block:: Python

    results = the_biogeme.estimate()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from "automatic" to "simple_bounds" 
    *** Initial values of the parameters are obtained from the file __my_favorite_model.iter 
    Cannot read file __my_favorite_model.iter. Statement is ignored. 
    As the model is not too complex, we activate the calculation of second derivatives. If you want to change it, change the name of the algorithm in the TOML file from "automatic" to "simple_bounds" 
    Optimization algorithm: hybrid Newton/BFGS with simple bounds [simple_bounds] 
    ** Optimization: Newton with trust region for simple bounds 
    Iter.         ASC_CAR      ASC_CAR_GA ASC_CAR_one_lug ASC_CAR_several       ASC_TRAIN    ASC_TRAIN_GA ASC_TRAIN_one_l ASC_TRAIN_sever          B_COST          B_TIME B_TIME_1st_clas    cube_tt_coef  square_tt_coef     Function    Relgrad   Radius      Rho      
        0            0.25            -1.2          -0.059           -0.49            -1.1             1.2            0.48            0.45           -0.71            -1.7           -0.55         0.00014          -0.093      8.2e+03        3.2       10     0.99   ++ 
        1            0.19            -1.2          -0.083           -0.53            -1.3             1.4            0.51            0.52           -0.77            -1.7           -0.66         0.00019            -0.1      8.1e+03        1.9    1e+02        1   ++ 
        2            0.19            -1.2          -0.083           -0.55            -1.3             1.4            0.51            0.54           -0.77            -1.7           -0.67         0.00019            -0.1      8.1e+03      0.032    1e+03        1   ++ 
        3            0.19            -1.2          -0.083           -0.55            -1.3             1.4            0.51            0.54           -0.77            -1.7           -0.67         0.00019            -0.1      8.1e+03    7.1e-05    1e+03        1   ++ 
    Results saved in file my_favorite_model.html 
    Results saved in file my_favorite_model.pickle 




.. GENERATED FROM PYTHON SOURCE LINES 53-55

.. code-block:: Python

    print(results.short_summary())





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Results for model my_favorite_model
    Nbr of parameters:              13
    Sample size:                    10719
    Excluded data:                  9
    Null log likelihood:            -11093.63
    Final log likelihood:           -8148.851
    Likelihood ratio test (null):           5889.553
    Rho square (null):                      0.265
    Rho bar square (null):                  0.264
    Akaike Information Criterion:   16323.7
    Bayesian Information Criterion: 16418.34





.. GENERATED FROM PYTHON SOURCE LINES 56-57

Get the results in a pandas table

.. GENERATED FROM PYTHON SOURCE LINES 57-59

.. code-block:: Python

    pandas_results = results.get_estimated_parameters()








.. GENERATED FROM PYTHON SOURCE LINES 60-61

.. code-block:: Python

    pandas_results





.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>Value</th>
          <th>Rob. Std err</th>
          <th>Rob. t-test</th>
          <th>Rob. p-value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>ASC_CAR</th>
          <td>0.193057</td>
          <td>0.044191</td>
          <td>4.368671</td>
          <td>1.250047e-05</td>
        </tr>
        <tr>
          <th>ASC_CAR_GA</th>
          <td>-1.194747</td>
          <td>0.157769</td>
          <td>-7.572762</td>
          <td>3.663736e-14</td>
        </tr>
        <tr>
          <th>ASC_CAR_one_lugg</th>
          <td>-0.083521</td>
          <td>0.051120</td>
          <td>-1.633822</td>
          <td>1.022963e-01</td>
        </tr>
        <tr>
          <th>ASC_CAR_several_lugg</th>
          <td>-0.555340</td>
          <td>0.217753</td>
          <td>-2.550316</td>
          <td>1.076254e-02</td>
        </tr>
        <tr>
          <th>ASC_TRAIN</th>
          <td>-1.305491</td>
          <td>0.077253</td>
          <td>-16.898907</td>
          <td>0.000000e+00</td>
        </tr>
        <tr>
          <th>ASC_TRAIN_GA</th>
          <td>1.389739</td>
          <td>0.071917</td>
          <td>19.324254</td>
          <td>0.000000e+00</td>
        </tr>
        <tr>
          <th>ASC_TRAIN_one_lugg</th>
          <td>0.516221</td>
          <td>0.080211</td>
          <td>6.435814</td>
          <td>1.228138e-10</td>
        </tr>
        <tr>
          <th>ASC_TRAIN_several_lugg</th>
          <td>0.538939</td>
          <td>0.170964</td>
          <td>3.152351</td>
          <td>1.619613e-03</td>
        </tr>
        <tr>
          <th>B_COST</th>
          <td>-0.773722</td>
          <td>0.057310</td>
          <td>-13.500542</td>
          <td>0.000000e+00</td>
        </tr>
        <tr>
          <th>B_TIME</th>
          <td>-1.693541</td>
          <td>0.090445</td>
          <td>-18.724456</td>
          <td>0.000000e+00</td>
        </tr>
        <tr>
          <th>B_TIME_1st_class</th>
          <td>-0.666017</td>
          <td>0.087841</td>
          <td>-7.582061</td>
          <td>3.397282e-14</td>
        </tr>
        <tr>
          <th>cube_tt_coef</th>
          <td>0.000193</td>
          <td>0.000031</td>
          <td>6.269556</td>
          <td>3.620786e-10</td>
        </tr>
        <tr>
          <th>square_tt_coef</th>
          <td>-0.103586</td>
          <td>0.005047</td>
          <td>-20.524186</td>
          <td>0.000000e+00</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.632 seconds)


.. _sphx_glr_download_auto_examples_assisted_plot_b08selected_specification.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_b08selected_specification.ipynb <plot_b08selected_specification.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_b08selected_specification.py <plot_b08selected_specification.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_b08selected_specification.zip <plot_b08selected_specification.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
